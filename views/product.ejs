<% include _layouts/header %>

<section class="row">
    
    <h1 class="page-header"><%= p.title %></h1>
    
    <div class="col-xs-12 col-md-5">
        <img class="spi" id="myImg" src="/product_images/<%= p.id %>/<%= p.image %>" alt="" onclick="openFullscreen()">
        <br>
    </div>
    <div class="col-xs-12 col-md-7">
        <p><%= p.desc %></p>
        <p>Rs. <%= parseFloat(p.price).toFixed(2) %></p>
        <% if (loggedIn) { %>
        <p><a href="/cart/add/<%= p.slug %>">Add to cart</a></p>
        <% } else {%>
        <p>You must be logged in to purchase items.</p>
        <% } %>
    </div>
    <div class="col-xs-12">
        <ul class="gallery">
            <% galleryImages.forEach(function(image){ %>
            <% if (image != "thumbs") { %>
            <li>
                <a data-fancybox="gallery" href="/product_images/<%= p.id %>/gallery/<%= image %>">
                    <img src="/product_images/<%= p.id %>/gallery/thumbs/<%= image %>" alt="">
                </a>
            </li>
            <% } %>
            <% }); %>
        </ul>
    </div>
</section>

<script>
    /* Get the element you want displayed in fullscreen mode (a video in this example): */
    var elem = document.getElementById("myImg");
    
    /* When the openFullscreen() function is executed, open the video in fullscreen.
    Note that we must include prefixes for different browsers, as they don't support the requestFullscreen method yet */
    function openFullscreen() {
      if (elem.requestFullscreen) {
        elem.requestFullscreen();
      } else if (elem.webkitRequestFullscreen) { /* Safari */
        elem.webkitRequestFullscreen();
      } else if (elem.msRequestFullscreen) { /* IE11 */
        elem.msRequestFullscreen();
      }
    }
    </script>

<% include _layouts/footer %>